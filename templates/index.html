<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Personality Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Personality Predictor</h1>
        <p>Discover if you're an Introvert or Extrovert</p>
        
        <form id="predictionForm">
            <div class="form-group">
                <label>Time spent alone (hours/day):</label>
                <input type="number" step="0.1" name="Time_spent_Alone" required>
            </div>
            
            <div class="form-group">
                <label>Social event attendance (times/week):</label>
                <input type="number" name="Social_event_attendance" required>
            </div>
            
            <div class="form-group">
                <label>Going outside (times/week):</label>
                <input type="number" name="Going_outside" required>
            </div>
            
            <div class="form-group">
                <label>Friends circle size:</label>
                <input type="number" name="Friends_circle_size" required>
            </div>
            
            <div class="form-group">
                <label>Post frequency (times/week):</label>
                <input type="number" name="Post_frequency" required>
            </div>
            
            <div class="form-group">
                <label>Stage fear:</label>
                <select name="Stage_fear" required>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Drained after socializing:</label>
                <select name="Drained_after_socializing" required>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>
            
            <button type="submit">Predict Personality</button>
        </form>
        
        <div id="result" class="result-container"></div>
    </div>
<script>
    document.getElementById('predictionForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());
        
        // Convert numerical values to numbers
        const numericalFields = [
            'Time_spent_Alone',
            'Social_event_attendance',
            'Going_outside',
            'Friends_circle_size',
            'Post_frequency'
        ];
        
        numericalFields.forEach(field => {
            data[field] = parseFloat(data[field]);
        });
        
        try {
            const response = await fetch('/api/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });
            
            // Check for HTTP errors
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`HTTP error! Status: ${response.status}, Response: ${errorText}`);
            }
            
            const result = await response.json();
            document.getElementById('result').innerHTML = `
                <h2>You are an: ${result.personality}</h2>
                <p>Confidence: ${(result.confidence * 100).toFixed(1)}%</p>
            `;
        } catch (error) {
            console.error('Prediction error:', error);
            document.getElementById('result').innerHTML = `
                <p class="error">Error: ${error.message}</p>
            `;
        }
    });
</script>
</body>
</html>